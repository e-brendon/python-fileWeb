{% extends "base.html" %}

{% block title %}Arquivos | fileweb{% endblock %}

{% block body %}
  <div class="topbar">
    <div>
      <h1>Arquivos</h1>
      <p class="muted">Base: <span class="pill">{{ base_dir }}</span></p>
      <p class="muted">Atual: <span class="pill">{{ current_dir }}</span></p>
      {% if parent_rel %}
        <p><a href="{% url 'files_in_dir' parent_rel %}">âŸµ Voltar</a></p>
      {% endif %}
    </div>
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit">Sair</button>
    </form>
  </div>

  {% if files %}
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Tamanho (bytes)</th>
        </tr>
      </thead>
      <tbody>
        {% for file in files %}
          {% if file.kind == "dir" %}
            <tr>
              <td>ğŸ“ <a href="{% url 'files_in_dir' file.relative_path %}">{{ file.name }}/</a></td>
              <td>â€”</td>
            </tr>
          {% else %}
            <tr>
              <td>ğŸ“„ <a href="{% url 'download' file.relative_path %}">{{ file.name }}</a></td>
              <td>{{ file.size }}</td>
            </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="muted">Nenhum arquivo encontrado.</p>
  {% endif %}
{% endblock %}
