{% extends "base.html" %}

{% block title %}Backup Zeus{% endblock %}

{% block body %}
  <div class="topbar">
    <div>
      <h1>Backup Zeus‚ö°Ô∏è 2025</h1>
      {% if parent_rel %}
        <p><a href="{% url 'files_in_dir' parent_rel %}">‚üµ Voltar</a></p>
      {% endif %}
    </div>
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit">Sair</button>
    </form>
  </div>

  {% if files %}
    <form method="post" action="{% url 'download_multiple' %}">
      {% csrf_token %}
      <input type="hidden" name="current" value="{{ current_rel }}">
      <div style="display:flex; gap:8px; margin:12px 0;">
        <button type="submit">Baixar selecionados</button>
      </div>
      <table>
        <thead>
          <tr>
            <th></th>
            <th>Nome</th>
            <th>Tamanho (bytes)</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
            {% if file.kind == "dir" %}
              <tr>
                <td><input type="checkbox" name="files" value="{{ file.relative_path }}"></td>
                <td>üìÅ <a href="{% url 'files_in_dir' file.relative_path %}">{{ file.name }}/</a></td>
                <td>‚Äî</td>
              </tr>
            {% else %}
              <tr>
                <td><input type="checkbox" name="files" value="{{ file.relative_path }}"></td>
                <td>üìÑ <a href="{% url 'download' file.relative_path %}">{{ file.name }}</a></td>
                <td>{{ file.size }}</td>
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </form>
  {% else %}
    <p class="muted">Nenhum arquivo encontrado.</p>
  {% endif %}
{% endblock %}
